(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{392:function(e,t,l){},460:function(e,t,l){"use strict";l(392)},538:function(e,t,l){"use strict";l.r(t);l(21);var n={props:{value:{type:Object,required:!0},nodes:{type:Array,default:()=>[]},availableClasses:{type:Object,default:()=>({})},coreFields:{type:null|Array},additionalFields:{type:Array,default:()=>[]},lang:{type:String,required:!1},languages:{type:Array,default(){var e,t;return(null===(e=this.$mapo.$options)||void 0===e||null===(t=e.content)||void 0===t?void 0:t.languages)||[]}},readonly:Boolean,menuEndpoint:String},data(){return{model:this.value,availablePages:[]}},watch:{value(e){this.model=e,this.loadPages()},model(e){this.$emit("input",e)}},computed:{fields(){return[...this.coreFields||this.defaultCoreFields,...this.additionalFields]},pageTypesEndpoint(){return this.menuEndpoint.replace(/\/$/,"")+"/page_types"},slotBindings(){return{model:this.model,errors:this.model.errors,currentLang:this.lang,langs:this.langs,fields:this.fields,readonly:this.readonly}},parents(){let e=(t,l=[])=>{let n=t.find(({id:e})=>e==this.model.id);return n?[...l,n]:t.filter(({nodes:e})=>e.length).reduce((t,n)=>t.length?t:e(n.nodes,[...l,n]),[])};return e(this.nodes)},defaultCoreFields(){var e;return[{value:"title",label:this.$t("mapo.menuNodeEditor.title"),synci18n:!0},{value:"link.link_type",label:this.$t("mapo.menuNodeEditor.linkTypeLabel"),type:"select",class:"col-md-4",synci18n:!0,attrs:{items:[{text:this.$t("mapo.menuNodeEditor.relational"),value:"RE"},{text:this.$t("mapo.menuNodeEditor.static"),value:"ST"}]}},{value:"meta.style",label:this.$t("mapo.menuNodeEditor.styleLabel"),type:"select",class:"col-md-4",synci18n:!0,attrs:{items:Object.keys(this.availableClasses).map(e=>({text:e,value:this.availableClasses[e]}))}},{value:"meta.target_bank",label:this.$t("mapo.menuNodeEditor.openInNewTabLabel"),class:"col-md-4",type:"switch",synci18n:!0},{value:"link.content_type",label:this.$t("mapo.menuNodeEditor.relContentTypeLabel"),vShow:({model:e})=>"RE"==e.link.link_type,onChange:this.loadPages,class:"col-md-6",type:"fks",synci18n:!0,attrs:{multiple:!1,returnObject:!1,itemText:"verbose_name_plural",endpoint:this.pageTypesEndpoint}},{value:"link.page_id",label:this.$t("mapo.menuNodeEditor.relPageIdLabel"),vShow:({model:e})=>"RE"==e.link.link_type,class:"col-md-6",type:"select",synci18n:!0,attrs:{items:null===(e=this.availablePages)||void 0===e?void 0:e.map(e=>({text:e.name,value:e.id}))}},{value:"link.static",label:this.$t("mapo.menuNodeEditor.staticLabel"),vShow:({model:e})=>"ST"==e.link.link_type,synci18n:!0}]}},mounted(){this.loadPages()},methods:{async loadPages(){var e;const{content_type:t}=(null===(e=this.model)||void 0===e?void 0:e.link)||{};if(t){const e={params:{language_code:this.lang}};this.availablePages=await this.$mapo.$api.crud(this.pageTypesEndpoint).detail(t,e)}else this.availablePages=[]}}},a=(l(460),l(1)),s=Object(a.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-node-editor--wrapper"},[t("div",{staticClass:"menu-node-editor--topbar"},[t("h5",{staticClass:"menu-node-editor--breadcrumbs"},[t("span",{staticClass:"menu-node-editor--breadcrumbs-title"},[e._v(e._s(e.$t("mapo.menuNodeEditor.editNode"))+":")]),e._v(" "),e._l(e.parents,(function(l,n){return[t("span",{key:"i"+n,staticClass:"menu-node-editor--breadcrumbs-item",on:{click:function(t){e.model=l}}},[e._v(e._s(l.title))]),e._v(" "),n!=e.parents.length-1?t("span",{key:"d"+n,staticClass:"menu-node-editor--breadcrumbs-divider"},[e._v("\n          >\n        ")]):e._e()]}))],2),e._v(" "),t("div",[t("v-btn",{attrs:{tile:"",color:"error"},on:{click:function(t){return e.$emit("delete")}}},[t("v-icon",[e._v("mdi-delete")])],1)],1)]),e._v(" "),e._t("form.top",null,null,e.slotBindings),e._v(" "),e._t("form",(function(){return[t("Form",{staticClass:"menu-node-editor--form",attrs:{currentLang:e.lang,languages:e.languages,errors:e.model.errors,fields:e.fields,moreSlotBindings:e.slotBindings,readonly:e.readonly},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,l){return{key:l,fn:function(t){return[e._t(l,null,null,t)]}}}))],null,!0),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[e._l(e.$slots,(function(l,n){return t("template",{slot:n},[e._t(n)],2)}))],2)]}),null,e.slotBindings),e._v(" "),e._t("form.bottom",null,null,e.slotBindings)],2)}),[],!1,null,"57d4f514",null);t.default=s.exports}}]);