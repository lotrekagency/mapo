(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{453:function(e,t){},531:function(e,t,i){"use strict";i.r(t);var s={name:"ListActions",data:()=>({action:null}),props:{lookup:{type:String,default:"id"},actions:{type:Array,default(){return[{label:this.$t("mapo.listActions.permanentDelete"),handler:function({selection:e,lookup:t,crud:i}){return Promise.all(e.map(e=>i&&i.delete(e[t])))},permissions:"delete"}]}},selection:{type:[Array,String],default:()=>[]},selectionQuery:{type:URLSearchParams,default:()=>new URLSearchParams},crud:{type:Object,required:!0}},computed:{isActive(){return void 0!==this.$attrs["show-select"]},filteredActions(){return this.actions.filter(e=>{var t,i;return"all"!=this.selection&&(null===(t=e.handleMultiple)||void 0===t||t)||"all"==this.selection&&null!==(i=e.handleAll)&&void 0!==i&&i})}},methods:{isDisabled(e){const t="string"==typeof e.permissions?[e.permissions]:e.permissions||[];return!!t.length&&!t.every(e=>this.userCan(e))},userCan(e){return!this.$mapo.$auth.routeMiddlewares.includes("permissions")||this.$mapo.$auth.user.permissions.includes(e)},handleAction(){if(!this.selectAll&&!this.selection.length)return this.$mapo.$snack.open({message:this.$t("mapo.listActions.selectionRequired"),color:"error"});const e={selection:this.selection,selectionQuery:this.selectionQuery,lookup:this.lookup,crud:this.crud};return this.action?this.action(e).then(e=>this.$emit("actionCompleted",e)):()=>{}}}},l=i(1),n=i(453),o=i.n(n),a=Object(l.a)(s,(function(){var e=this,t=e._self._c;return e.isActive?t("div",{staticClass:"d-flex flex-row align-center fill-height"},[t("v-select",e._b({staticClass:"rounded-0",attrs:{label:e.$t("mapo.listActions.groupActions"),items:e.filteredActions,"item-disabled":e.isDisabled,"item-text":"label","item-value":"handler",outlined:"",dense:"","hide-details":"",clearable:"","no-data-text":"No actions available"},model:{value:e.action,callback:function(t){e.action=t},expression:"action"}},"v-select",e.$attrs,!1)),e._v(" "),t("v-btn",{staticClass:"rounded-0 elevation-0 ml-2",attrs:{outlined:"",color:"primary",disabled:!e.action},on:{click:e.handleAction}},[e._v(e._s(e.$t("mapo.apply")))])],1):e._e()}),[],!1,null,null,null);"function"==typeof o.a&&o()(a);t.default=a.exports}}]);