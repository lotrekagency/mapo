(window.webpackJsonp=window.webpackJsonp||[]).push([[10,85],{413:function(e,t,i){},420:function(e,t,i){"use strict";i.r(t);var a={methods:{toggleTheme(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}}},s=i(1),r=Object(s.a)(a,(function(){return(0,this._self._c)("v-icon",{on:{click:this.toggleTheme}},[this._v("mdi-theme-light-dark")])}),[],!1,null,null,null);t.default=r.exports},483:function(e,t,i){"use strict";i(413)},508:function(e,t,i){"use strict";i.r(t);var a=({assetsBasePath:e,isDark:t})=>({language:"en",height:300,toolbarCanCollapse:!0,removePlugins:"elementspath",resize_enabled:!1,removePlugins:"image,exportpdf",extraPlugins:"image2",toolbar:[{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"styles",items:["Styles","Format","Font","FontSize","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","BidiLtr","BidiRtl","Language"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe","insertMedia"]},{name:"document",items:["Source"]}],skin:`moono,${e}skins/moono/`}),s=(i(420),{name:"wygEditorCKE",props:{value:{type:String,default:""},conf:{type:Object,default:()=>({})},label:String,errorMessages:Array,readonly:{type:Boolean,default:!1}},data(){return{editorInstance:null,editorContent:this.value,editorLoaded:!1}},computed:{hasErrors(){return this.errorMessages&&this.errorMessages.length},defaultConfiguration(){const{base:e}=this.$router.options,t=e+"mapo/ckeditor/",{isDark:i}=this.$vuetify.theme;return a({assetsBasePath:t,isDark:i})}},mounted(){const{base:e}=this.$router.options;this.assetsBasePath=e+"mapo/ckeditor/",async function(){return new Promise((e,t)=>{void 0!==window.CKEDITOR&&e();let i=document.getElementById("ckeditor-script")||null;const a=()=>{i.removeEventListener("load",a),e()};if(i)i.addEventListener("load",a);else try{i=document.createElement("script"),i.referrerPolicy="origin",i.type="application/javascript",i.id="ckeditor-script",i.src="https://cdn.ckeditor.com/4.22.1/full/ckeditor.js",i.async=!0,i.addEventListener("load",a),document.head.appendChild(i)}catch(e){t(e)}})}().then(this.initEditor)},methods:{initEditor(){this.createEditorInstance(),this.editorInstance.setData(this.value),this.editorInstance.on("change",()=>{const e=this.editorInstance.getData();this.$emit("input",e)})},createEditorInstance(){const{base:e}=this.$router.options,t=e+"mapo/ckeditor/";CKEDITOR.editorConfig=window.CKEDITOR.editorConfig,CKEDITOR.plugins.addExternal("image2",t+"plugins/image2/","plugin.js"),this.editorInstance=CKEDITOR.replace(this.$refs.ckeditor,{allowedContent:!0,extraAllowedContent:"*(*);*{*}[*]",...this.defaultConfiguration}),this.editorInstance.addCommand("insertMedia",{exec:e=>{this.insertMediaCallback().then(t=>{var i=CKEDITOR.dom.element.createFromHtml(t);e.insertElement(i),e.setData(e.getData())})}}),this.editorInstance.ui.addButton("insertMedia",{label:"Insert Media",command:"insertMedia",toolbar:"insert",icon:"image"})},destroyEditor(){this.editorInstance&&this.editorInstance.destroy()},reloadEditor(){this.destroyEditor(),this.initEditor()},insertMediaCallback:async function(){return new Promise((e,t)=>{this.$refs.mediaManager.open().then(i=>{if(i){let t;switch(i.mime_type&&i.mime_type.split("/")[0]){case"image":t=`<img src="${i.file}" alt="${i.alt_text}"/></p>`;break;case"video":t=`<video controls><source src="${i.file}" type="${i.mime_type}"></video>`;break;case"audio":t=`<audio controls><source src="${i.file}" type="${i.mime_type}"></audio>`;break;default:t=`<a href="${i.file}" target="_blank">${i.file}</a>`}e(t)}else t("No image selected")}).catch(e=>t(e))})}},beforeDestroy(){this.destroyEditor()},watch:{value(e){this.editorInstance&&e!==this.editorInstance.getData()&&this.editorInstance.setData(e)},readonly(e){this.editorInstance&&this.editorInstance.setReadOnly(e)},"$vuetify.theme.isDark"(){this.reloadEditor()}}}),r=(i(483),i(1)),o=Object(r.a)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mapo-wyg-editor"},[t("media-manager-dialog",{ref:"mediaManager"}),e._v(" "),e.label?t("span",{staticClass:"v-label",class:{"error--text":e.hasErrors,"text--secondary":!e.hasErrors}},[e._v(e._s(e.label)+":")]):e._e(),e._v(" "),t("div",{ref:"ckeditor"},[e.editorLoaded?e._e():t("v-skeleton-loader",{attrs:{type:"table-heading, list-item-two-line, list-item-avatar-two-line, list-item-three-lineimage, table-tfoot"}})],1),e._v(" "),t("div",{staticClass:"mt-2"},[t("v-messages",{attrs:{value:e.errorMessages,color:"error"}})],1)],1)}),[],!1,null,null,null);t.default=o.exports}}]);