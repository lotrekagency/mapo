(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{279:function(e,t){e.exports={humanFileSize:function(e,t=!1,i=1){const o=t?1e3:1024;if(Math.abs(e)<o)return e+" B";const r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let l=-1;const s=10**i;do{e/=o,++l}while(Math.round(Math.abs(e)*s)/s>=o&&l<r.length-1);return e.toFixed(i)+" "+r[l]},slugify:function(e){e=(e=(e=e||"").replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",i=0,o=t.length;i<o;i++)e=e.replace(new RegExp(t.charAt(i),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(i));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},titleCase:function(e){return e&&e[0].toUpperCase()+e.slice(1).toLowerCase()||""}}},397:function(e,t,i){},465:function(e,t,i){"use strict";i(397)},544:function(e,t,i){"use strict";i.r(t);var o=i(30),r=i(279),l={name:"MediaFolders",data:()=>({mobileOpened:!1,expanded:!1,dialog:!1,folderEdit:{},searchMime:!1}),props:{mime:{type:String,default:""}},methods:{...Object(o.b)("mapo/media",["getRoot","deleteFolder","updateOrCreateFolder"]),createFolder(e){this.folderEdit=Object.assign({updir:this.parentFolder&&this.parentFolder.id},e),this.dialog=!0},confirmDelete(e){this.$mapo.$confirm.open({title:this.$t("mapo.delete"),question:this.$t("mapo.mediaFolders.confirmDelete"),approveButton:{text:this.$t("mapo.delete"),attrs:{color:"red",text:!0}}}).then(t=>t&&this.deleteFolder(e))},saveFolder(){this.folderEdit.slug=this.slugify(this.folderEdit.title),this.updateOrCreateFolder(this.folderEdit),this.closeEdit()},closeEdit(){this.dialog=!1,this.folderEdit={}},slugify:r.slugify,setSearchMime(e){this.searchMime=e,this.getRoot({mime:e,all:!0})}},mounted(){this.storeUnsubscribe=this.$store.subscribeAction(e=>{var t;(e.type=!(null!==(t=e.payload)&&void 0!==t&&t.mime))&&(this.searchMime=null)})},destroyed(){this.storeUnsubscribe&&this.storeUnsubscribe()},computed:{...Object(o.c)("mapo/media",["folders","parentFolders","loading","parentFolder"]),isMobile(){return this.$vuetify.breakpoint.xs},parentParentFolder(){return this.parentFolders[this.parentFolders.length-2]||{path:"/"}},drawnerProps(){return{permanent:!this.isMobile,expandOnHover:!this.isMobile}},mimeFolders(){return[{mime:"image/*",label:this.$t("mapo.mediaFolders.imageFolder"),icon:"mdi-folder-image"},{mime:"video/*",label:this.$t("mapo.mediaFolders.videoFolder"),icon:"mdi-folder-play"},{mime:"audio/*",label:this.$t("mapo.mediaFolders.audioFolder"),icon:"mdi-folder-music"},{mime:"application/*",label:this.$t("mapo.mediaFolders.docFolder"),icon:"mdi-folder-text"}].filter(({mime:e})=>!this.mime||e==this.mime)}}},s=(i(465),i(1)),a=Object(s.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"media-navigation"},[t("div",{staticClass:"media-navigation--spacer"},[e.isMobile?t("v-btn",{staticClass:"open-button",attrs:{tile:"",block:""},on:{click:function(t){e.mobileOpened=!e.mobileOpened}}},[t("v-icon",[e._v("mdi-chevron-up-circle-outline")])],1):e._e()],1),e._v(" "),t("v-navigation-drawer",e._b({attrs:{absolute:"",bottom:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("v-list-item",{staticClass:"py-1",attrs:{dense:""},on:{click:function(t){return t.stopPropagation(),e.createFolder.apply(null,arguments)}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-folder-plus")])],1),e._v(" "),t("v-list-item-title",[e._v(e._s(e.$t("mapo.mediaFolders.newFolder")))])],1),e._v(" "),t("v-divider"),e._v(" "),e._l(e.mimeFolders,(function(i){return t("v-list-item",{key:i.mime,attrs:{"input-value":e.searchMime==i.mime,dense:""},on:{click:function(t){return t.stopPropagation(),e.setSearchMime(i.mime)}}},[t("v-list-item-icon",[t("v-icon",[e._v(e._s(i.icon))])],1),e._v(" "),t("v-list-item-title",[e._v(e._s(i.label))])],1)})),e._v(" "),t("v-divider")]},proxy:!0},e.parentFolder||e.searchMime?{key:"append",fn:function(){return[t("v-divider"),e._v(" "),t("v-list-item",{staticClass:"py-1",attrs:{dense:""},on:{click:function(t){return t.stopPropagation(),e.getRoot({folder:e.parentParentFolder})}}},[t("v-list-item-icon",[t("v-icon",[e._v("mdi-chevron-double-left")])],1),e._v(" "),t("v-list-item-title",[e._v("\n          "+e._s(e.$t("mapo.mediaFolders.goBack"))+"\n        ")])],1)]},proxy:!0}:null],null,!0),model:{value:e.mobileOpened,callback:function(t){e.mobileOpened=t},expression:"mobileOpened"}},"v-navigation-drawer",e.drawnerProps,!1),[e._v(" "),e._v(" "),e.folders&&e.folders.length?t("v-list",{staticClass:"py-0",attrs:{dense:""}},e._l(e.folders,(function(i){return t("v-list-item",{key:i.id,on:{click:function(t){return t.stopPropagation(),e.getRoot({folder:i})}}},[t("v-list-item-icon",{attrs:{dense:""}},[t("v-icon",[e._v("mdi-folder")])],1),e._v(" "),t("v-list-item-content",{attrs:{dense:""}},[t("v-list-item-title",{domProps:{textContent:e._s(i.title)}})],1),e._v(" "),t("v-list-item-action",{staticClass:"d-flex flex-row",attrs:{dense:""}},[t("v-icon",{staticClass:"folder_grid__editicon ma-0 ml-auto",attrs:{size:"16"},on:{click:function(t){return t.stopPropagation(),e.createFolder(i)}}},[e._v("mdi-pencil")]),e._v(" "),t("v-icon",{staticClass:"folder_grid__editicon ma-0",attrs:{size:"16"},on:{click:function(t){return t.stopPropagation(),e.confirmDelete(i)}}},[e._v("mdi-delete")])],1)],1)})),1):t("div",{staticClass:"media-folders--empty text--secondary body-2"},[t("v-icon",{attrs:{size:"60"}},[e._v(" mdi-folder-information-outline")]),e._v(" "),t("p",[e._v(e._s(e.$t("mapo.mediaFolders.noFolders")))])],1)],1),e._v(" "),t("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",[e._v("\n        "+e._s(e.folderEdit.id?e.$t("mapo.mediaFolders.editFolder"):e.$t("mapo.mediaFolders.newFolder"))+"\n      ")]),e._v(" "),t("v-card-text",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:e.$t("mapo.mediaFolders.folderName")},model:{value:e.folderEdit.title,callback:function(t){e.$set(e.folderEdit,"title",t)},expression:"folderEdit.title"}})],1)],1)],1)],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"primary",text:""},on:{click:e.closeEdit}},[e._v(e._s(e.$t("mapo.cancel")))]),e._v(" "),t("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveFolder}},[e._v(e._s(e.folderEdit.id?e.$t("mapo.save"):e.$t("mapo.create")))])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=a.exports}}]);