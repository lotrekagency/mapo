(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{288:function(t,e){t.exports={debounce:function(t,e,i){var s;return function(){var l=this,r=arguments,a=function(){s=null,i||t.apply(l,r)},c=i&&!s;clearTimeout(s),s=setTimeout(a,e),c&&t.apply(l,r)}},memoizedDebounce:function(t,e,i,s=(t=>JSON.stringify(t))){var l={};return function(){var r=this,a=arguments,c=s(arguments),o=function(){l[c]=null,i||t.apply(r,a)},n=i&&!l[c];clearTimeout(l[c]),l[c]=setTimeout(o,e),n&&t.apply(r,a)}}}},386:function(t,e,i){},454:function(t,e,i){"use strict";i(386)},455:function(t,e){},532:function(t,e,i){"use strict";i.r(e);i(20),i(21);var s=i(288),l={name:"ListFilters",data:()=>({compFilters:[],activeFilters:[]}),props:{filters:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]}},methods:{addDateFilter(t){const{dates:e}=t;e.sort((t,e)=>Date.parse(t)-Date.parse(e)),e&&e.length>1?this.addFilter(t,{text:e.map(t=>new Date(t).toLocaleDateString()).join(" ~ "),value:e.join(",")}):e&&e.length||this.removeFilter(t)},removeFilter(t){if(t.datepicker){const e=this.compFilters.findIndex(e=>e.value===t.value);this.compFilters[e].dates&&(this.compFilters[e].dates=[])}const e=this.activeFilters.findIndex(e=>e.value===t.value);this.activeFilters.splice(e,1)},toggleChoice(t,e){this.isChoiceActive(t,e)?this.removeFilterChoice(t,e):this.addFilter(t,e)},removeFilterChoice(t,e){const i=this.activeFilters.findIndex(e=>e.value===t.value);if(-1!==i){const t=this.activeFilters[i].active.findIndex(t=>t.value===e.value);-1!==t&&this.activeFilters[i].active.splice(t,1),this.activeFilters[i].active.length||this.activeFilters.splice(i,1)}},addFilter(t,e){const i=this.activeFilters.findIndex(e=>e.value===t.value);if(-1!==i){if(-1!==this.activeFilters[i].active.findIndex(t=>t.value===e.value))return;t.multiple&&!t.datepicker?this.activeFilters[i].active.push(e):this.activeFilters[i].active=[e]}else this.activeFilters.push({...t,active:[e]})},isChoiceActive(t,e){const i=this.activeFilters.find(e=>e.value==t.value);return-1!==((null==i?void 0:i.active)||[]).findIndex(t=>t.value==e.value)},formatActiveChoices:t=>t.map(t=>t.text).join(", "),setQparams(t){const e=t.reduce((t,e)=>({...t,[e.value]:e.active.map(t=>t.value).join(",")}),{}),i=Object.keys(this.$route.query).filter(t=>!this.compFilters.some(e=>e.value==t)).reduce((t,e)=>({...t,[e]:this.$route.query[e]}),{});this.$router.push({query:{...i,...e}})},restoreFromQparams(){Object.keys(this.$route.query).forEach(t=>{const e=this.compFilters.findIndex(e=>e.value==t);if(-1!==e){let i=this.compFilters[e];i.datepicker?(i.dates=[...this.$route.query[t].split(",")],this.addDateFilter(i)):i.choices.forEach(e=>{this.$route.query[t].split(",").includes(e.value+"")&&this.addFilter(i,e)})}})},loadFilters(){this.compFilters=this.filters.map(t=>({...t,dates:t.datepicker?[]:void 0})),this.applyDefaultChoices()},applyDefaultChoices(){this.compFilters.forEach(t=>{t.defaultChoice&&(t.datepicker?(t.dates=[...t.defaultChoice.split(",")],this.addDateFilter(t)):t.choices.forEach(e=>{t.defaultChoice.split(",").includes(e.value+"")&&this.addFilter(t,e)}))})},cleanActiveFilters(){this.compFilters.forEach(t=>{this.activeFilters.find(e=>e.value==t.value)||this.removeFilter(t)})}},watch:{activeFilters:{deep:!0,handler:Object(s.debounce)((function(t){this.$emit("input",t),this.setQparams(t)}),200)},value:{deep:!0,handler(t){JSON.stringify(t)!==JSON.stringify(this.activeFilters)&&(this.activeFilters=t,this.cleanActiveFilters())}},filters:{deep:!0,handler(t){this.loadFilters(),this.restoreFromQparams()}}},created(){this.loadFilters(),this.restoreFromQparams()}},r=(i(454),i(1)),a=i(455),c=i.n(a),o=Object(r.a)(l,(function(){var t=this,e=t._self._c;return t.compFilters.length?e("div",{staticClass:"main"},[e("v-row",{staticClass:"flex-sm-row-reverse"},[e("v-col",{staticClass:"d-flex justify-end align-center",attrs:{cols:"12",sm:"3"}},[e("v-menu",t._b({attrs:{"offset-y":"","min-width":"250px","max-width":"400px","nudge-top":"-5px",tile:"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e("v-btn",t._g(t._b({attrs:{text:""}},"v-btn",t.$attrs,!1),i),[t._v("\n            "+t._s(t.$t("mapo.listFilters.filter"))+" "),e("v-icon",[t._v("mdi-filter-variant")])],1)]}}],null,!1,2642537929)},"v-menu",{...t.$attrs,value:null},!1),[t._v(" "),e("v-list",{staticClass:"pa-0"},t._l(t.compFilters,(function(i,s){return e("div",{key:s},[t._t("filter."+i.value,(function(){return[e("v-list-group",[e("v-list-item-title",{attrs:{slot:"activator"},slot:"activator"},[t._t(`filter.${i.value}.title`,(function(){return[t._v("\n                    "+t._s(i.text)+"\n                  ")]}),null,{filter:i,addFilter:t.addFilter,removeFilterChoice:t.removeFilterChoice,toggleChoice:t.toggleChoice,activeFilters:t.activeFilters})],2),t._v(" "),t._t(`filter.${i.value}.content`,(function(){return[i.datepicker?e("div",{staticClass:"d-flex flex-column align-end justify-center pb-2"},[e("v-date-picker",{staticClass:"rounded-0",attrs:{range:"","full-width":"","no-title":"",color:"primary"},on:{input:function(e){return t.addDateFilter(i)}},model:{value:i.dates,callback:function(e){t.$set(i,"dates",e)},expression:"filter.dates"}}),t._v(" "),e("v-btn",{staticClass:"datapicker-clear-btn elevation-0",attrs:{small:"",tile:""},on:{click:function(e){return t.removeFilter(i)}}},[t._v(t._s(t.$t("mapo.clear")))])],1):e("v-list",{staticClass:"overflow-y-auto pa-0",attrs:{"max-height":"200",dense:""}},t._l(i.choices,(function(s,l){return e("v-list-item",{key:l,staticClass:"v-list-item--link",attrs:{"active-class":"primary--text","input-value":t.isChoiceActive(i,s)},nativeOn:{click:function(e){return e.stopPropagation(),t.toggleChoice(i,s)}}},[t._t(`filter.${i.value}.icon`,(function(){return[e("v-list-item-icon",[e("v-icon",{domProps:{textContent:t._s(s.icon||"mdi-circle-small")}})],1)]}),null,{filter:i,choice:s}),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{domProps:{textContent:t._s(s.text)}})],1)],2)})),1)]}),null,{filter:i,addFilter:t.addFilter,removeFilterChoice:t.removeFilterChoice,toggleChoice:t.toggleChoice,activeFilters:t.activeFilters})],2)]}),null,{filter:i,addFilter:t.addFilter,removeFilterChoice:t.removeFilterChoice,toggleChoice:t.toggleChoice,activeFilters:t.activeFilters})],2)})),0)],1)],1),t._v(" "),t.activeFilters.length?e("v-col",{attrs:{cols:"12",sm:"9"}},[e("v-slide-group",t._b({attrs:{"show-arrows":""}},"v-slide-group",t.$attrs,!1),t._l(t.activeFilters,(function(i,s){return e("v-chip",t._b({key:s,staticClass:"ma-1",attrs:{close:"",label:""},on:{"click:close":function(e){return t.removeFilter(i)}}},"v-chip",t.$attrs,!1),[e("span",[e("small",[e("b",[t._v(t._s(i.text.toUpperCase())+": ")]),t._v("\n              "+t._s(t.formatActiveChoices(i.active).toUpperCase())+"\n            ")])])])})),1)],1):t._e()],1)],1):t._e()}),[],!1,null,"b6a58010",null);"function"==typeof c.a&&c()(o);e.default=o.exports}}]);