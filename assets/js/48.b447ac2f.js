(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{350:function(e,t){e.exports={calcMaxMenuNestDepth:function e(t,i=0){var n;if(null==t||!t.nodes||0===(null==t||null===(n=t.nodes)||void 0===n?void 0:n.length))return i;let o=i;for(const n of t.nodes){const t=e(n,i+1);o=Math.max(o,t)}return o}}},394:function(e,t,i){},462:function(e,t,i){"use strict";i(394)},540:function(e,t,i){"use strict";i.r(t);var n=i(333),o=i.n(n),d=i(350),s={name:"MenuTreeviewNode",components:{draggable:o.a},props:{node:{type:Object,required:!0},selected:{type:Object,default:null},root:{type:Boolean,default:!0},depth:{type:Number,default:1},maxDepth:{type:Number,default:-1},dragging:{type:Boolean,default:!1}},watch:{inDragging(e){this.$emit("update:dragging",e)},dragging(e){this.inDragging=e},selected(e){this.inSelected=e},inSelected(e){this.$emit("update:selected",e)},node:{handler(e){this.inNode=e,this.title=null==e?void 0:e.title},deep:!0}},data(){var e;return{editTitle:!1,inDragging:this.dragging,inSelected:this.selected,inNode:this.node,open:!0,title:null===(e=this.node)||void 0===e?void 0:e.title}},computed:{hasErrors(){var e;return(null===(e=this.node)||void 0===e?void 0:e.errors)&&Object.keys(this.node.errors).length>0}},methods:{move(e){let{draggedContext:{element:t}}=e,i=Object(d.calcMaxMenuNestDepth)(t)+ +e.to.dataset.depth;return!(this.maxDepth>0&&i>=this.maxDepth)},select(e){this.inSelected=e},updateNodeTitle(){this.$set(this.inNode,"title",this.title),this.inNode.new&&(this.$set(this.inNode,"new",!1),this.$nextTick(()=>delete this.inNode.new),this.inNode.title?this.inSelected=this.inNode:(console.log("DELETING",this.inNode),this.$emit("silentDelete",this.inNode))),this.editTitle=!1},compareItems:(e,t)=>e&&t&&e.id===t.id,findChildIndex(e){return this.inNode.nodes.findIndex(({id:t})=>t==e.id)},deleteChild(e){var t;let i=this.findChildIndex(e);return i>-1?(this.inNode.nodes.splice(i,1),!0):null===(t=this.$refs.nodes)||void 0===t?void 0:t.some(t=>t.deleteChild(e))},openIfChild(e){this.findChildIndex(e)>-1&&(this.open=!0)}}},l=(i(462),i(1)),a=Object(l.a)(s,(function(){var e=this,t=e._self._c;return e.inNode?t("div",{staticClass:"menu-treeeview-node--wrapper",on:{dblclick:function(t){t.stopPropagation(),e.editTitle=!0}}},[t("v-btn",{staticClass:"menu-treeeview-node--expand-icon",attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.open=!e.open}}},[t("v-icon",{class:{"mdi-rotate-90":e.open}},[e._v("mdi-menu-right")])],1),e._v(" "),e.inNode.new||e.editTitle?t("v-list-item-content",[t("v-text-field",{staticClass:"menu-treeeview-node--title-edit",attrs:{autofocus:"","hide-details":"",dense:""},on:{blur:e.updateNodeTitle,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.updateNodeTitle.apply(null,arguments))},click:function(e){e.stopPropagation()}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1):t("v-list-item-title",{staticClass:"menu-treeeview-node--title",attrs:{tabindex:"0"},domProps:{innerHTML:e._s(e.inNode.title.trim()||"&nbsp;")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.$emit("delete",e.inNode)}}}),e._v(" "),e.hasErrors?t("v-list-item-icon",{staticClass:"ma-0"},[t("v-icon",{attrs:{size:"40",color:"error"}},[e._v("mdi-circle-small")])],1):e._e(),e._v(" "),t("v-list",{directives:[{name:"show",rawName:"v-show",value:e.open||e.inDragging,expression:"open || inDragging"}],staticClass:"menu-treeview-node--list shift",attrs:{dense:""}},[t("v-list-item-group",{attrs:{value:e.inSelected,"value-comparator":e.compareItems}},[t("draggable",{attrs:{emptyInsertThreshold:25,group:"nodes",draggable:".menu-treeview--draggable",move:e.move,"data-depth":e.depth},on:{start:function(t){e.inDragging=!0},end:function(t){e.inDragging=!1}},model:{value:e.inNode.nodes,callback:function(t){e.$set(e.inNode,"nodes",t)},expression:"inNode.nodes"}},e._l(e.inNode.nodes,(function(i,n){return t("v-list-item",{key:n+"_"+i.id+"CAT",staticClass:"menu-treeview--draggable",attrs:{value:i},on:{click:function(t){t.stopPropagation(),i.title&&e.select(i)}}},[t("MenuTreeviewNode",{ref:"nodes",refInFor:!0,attrs:{node:i,selected:e.inSelected,dragging:e.inDragging,depth:e.depth+1,"max-depth":e.maxDepth},on:{"update:selected":function(t){e.inSelected=t},"update:dragging":function(t){e.inDragging=t},delete:function(t){return e.$emit("delete",t)},silentDelete:function(t){return e.$emit("silentDelete",t)},"update:node":function(t){return e.$emit("update:node",e.inNode)}}})],1)})),1)],1)],1)],1):e._e()}),[],!1,null,"55bdeb5a",null);t.default=a.exports}}]);